<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="Automating mouseover task for HDB BTO information with bookmarklet" /><meta property="og:locale" content="en_US" /><meta name="description" content="Bookmarklet for HDB BTO information" /><meta property="og:description" content="Bookmarklet for HDB BTO information" /><link rel="canonical" href="http://localhost:4000/2021/01/13/bto-bookmarklet" /><meta property="og:url" content="http://localhost:4000/2021/01/13/bto-bookmarklet" /><meta property="og:site_name" content="DS" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-01-13T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Automating mouseover task for HDB BTO information with bookmarklet" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"url":"http://localhost:4000/2021/01/13/bto-bookmarklet","headline":"Automating mouseover task for HDB BTO information with bookmarklet","dateModified":"2021-01-13T00:00:00+08:00","datePublished":"2021-01-13T00:00:00+08:00","description":"Bookmarklet for HDB BTO information","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/01/13/bto-bookmarklet"},"@type":"BlogPosting","@context":"https://schema.org"}</script><title> Automating mouseover task for HDB BTO information with bookmarklet - DS</title><link rel="shortcut icon" href="/icons/favicon.ico"><link rel="alternate" type="application/atom+xml" title="DS" href="/atom.xml"><link rel="alternate" type="application/json" title="DS" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui, sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000}a:hover{text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-4ZFHRRPN4N"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-4ZFHRRPN4N'); </script></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">DS</h1>--><nav role="navigation"><ul><li><a href="/" >Posts</a></li><li><a href="/about" >About</a></li><li><a href="/search" >Search</a></li></ul></nav></header><section class="post"><h2>Automating mouseover task for HDB BTO information with bookmarklet</h2><p>Recently, I created a bookmarklet to make it convenient for people to check the price and size of HDB BTO units.</p><p>The bookmarklet’s GitHub repository can be found <a href="https://github.com/darensin01/hdb-flat-selection" target="_blank">here</a>.</p><h2 id="what-is-bto">What is BTO?</h2><p>BTO is an acronym for Build to Order. See <a href="https://en.wikipedia.org/wiki/Build_to_order_(HDB)">here</a> for an explanation.</p><h2 id="what-is-a-bookmarklet">What is a bookmarklet?</h2><p>See <a href="https://gist.github.com/caseywatts/c0cec1f89ccdb8b469b1">here</a> for an explanation.</p><h2 id="how-to-get-the-bookmarklet">How to get the bookmarklet?</h2><ul><li>Show/Reveal your browser’s bookmark manager (CTRL + Shift + B on Windows/Chrome).</li><li>Drag the following link onto your bookmarks bar: <a href="javascript:(function(){let css_selector_block_num = &quot;td[style~=&apos;background-color:#fffac2&apos;]&quot;;let block_num = document.querySelector(css_selector_block_num).innerText;let css_selector_units = &quot;table &gt; tbody &gt; tr &gt; td&quot;;let units = document.querySelectorAll(css_selector_units);let results = [];for (let i = 0; i &lt; units.length; i++) { let floor_and_unit_number = units[i].innerText; if (floor_and_unit_number[0] != &apos;#&apos;) {continue; }let unit_number = floor_and_unit_number.split(&quot;-&quot;)[1];let css_selector_unit_tooltip = `span[data-selector=&apos;${floor_and_unit_number}&apos;]`;let tooltip_elem = document.querySelector(css_selector_unit_tooltip);if (tooltip_elem === null) {continue; } let tooltip_text = tooltip_elem.title; let tooltip_array = tooltip_text.split(&quot;&lt;br&gt;&quot;); let price_text = tooltip_array[0]; let sqm_text = tooltip_array[2]; let price = parseInt(price_text.replace(&quot;$&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;&quot;)); let sqm = parseInt(sqm_text.replace(&quot; Sqm&quot;, &quot;&quot;)); let price_per_sqm = (price / sqm).toFixed(2); results.push({&apos;floor_and_unit_number&apos;: floor_and_unit_number,&apos;unit_number&apos;: unit_number,&apos;price&apos;: price_text,&apos;price_per_sqm&apos;: price_per_sqm,&apos;sqm&apos;: sqm_text, });}function render(display_list) { let unit_info_space = popup.document.getElementById(&quot;unitInformation&quot;); unit_info_space.innerHTML = &quot;&quot;; for (let i = 0; i &lt; display_list.length; i++) {let item = display_list[i];unit_info_space.innerHTML += `${i+1}) ${item[&apos;floor_and_unit_number&apos;]}: ${item[&apos;price&apos;]} (${item[&apos;sqm&apos;]}, $${item[&apos;price_per_sqm&apos;]}/sqm) &lt;br&gt;`; }}let popup = window.open(&quot;&quot;, &quot;&quot;, &apos;width=400,height=400,toolbar=0,menubar=0,titlebar=0&apos;);popup.document.title = `Block ${block_num}`;popup.document.body.innerHTML = `&lt;h2&gt;Block ${block_num}&lt;/h2&gt;&lt;div id=&quot;buttons&quot; style=&quot;margin:5px;&quot;&gt;&lt;/div&gt;&lt;div id=&quot;unitInformation&quot; style=&quot;margin:5px;&quot;&gt;&lt;/div&gt;`;let unit_keys = Object.keys(results[0]);let buttons_section = popup.document.getElementById(&quot;buttons&quot;);for (let i = 0; i &lt; unit_keys.length; i++) { let key_name = unit_keys[i]; let button = popup.document.createElement(&quot;button&quot;); button.setAttribute(&quot;style&quot;, `display:block;margin:2px;text-decoration: none;border-radius: 5px;color: black;border: 2px solid #000000;`); button.setAttribute(&quot;id&quot;, `sort_${key_name}_btn`); button.onclick = function() {results.sort((a, b) =&gt; (a[key_name] &gt; b[key_name]) ? 1 : ((b[key_name] &gt; a[key_name]) ? -1 : 0));render(results); }; let key_name_display = key_name.split(&quot;_&quot;).join(&quot; &quot;); button.innerHTML = `Sort by ${key_name_display}`; buttons_section.appendChild(button);}popup.document.getElementById(`sort_${Object.keys(results[0])[0]}_btn`).click();})();" style="border-radius: 7px; background-color: #A9A9A9; padding: 2px; text-decoration: none; font-size: 150%; margin: 5px;">BTO</a></li><li>Edit the new bookmark as whatever you want.</li><li>Follow the steps below to use the bookmarklet.</li></ul><h2 id="steps">Steps</h2><ul><li>From the <a href="https://services2.hdb.gov.sg/webapp/BP13AWFlatAvail/BP13SEstateSummary?sel=BTO" target="_blank">Flats Available for Selection page</a> as shown below, select a project (e.g. “4-room”).</li></ul><blockquote><p><img src="https://github.com/darensin01/hdb-flat-selection/blob/main/screenshots/ss4.PNG?raw=true" width="600px" /></p></blockquote><ul><li>For the project selected as shown below, select a block that is available for selection (e.g. 535C).</li></ul><blockquote><p><img src="https://github.com/darensin01/hdb-flat-selection/blob/main/screenshots/ss5.PNG?raw=true" width="600px" /></p></blockquote><ul><li>You should see a list of flats available for selection as shown below.</li></ul><blockquote><p><img src="https://github.com/darensin01/hdb-flat-selection/blob/main/screenshots/ss1.PNG?raw=true" width="350px" /></p></blockquote><ul><li>Mouseover the unit of interest to reveal the size (in square meters) and its price (in Singapore Dollars), as shown below.</li></ul><blockquote><p><img src="https://github.com/darensin01/hdb-flat-selection/blob/main/screenshots/ss2.png?raw=true" width="350px" /></p></blockquote><ul><li>Use the bookmarklet to open a new window that displays all the mouseover information, as shown below.</li><li>You can sort the information by price, sqm, price per sqm etc.</li></ul><blockquote><p><img src="https://github.com/darensin01/hdb-flat-selection/blob/main/screenshots/ss3.PNG?raw=true" width="350px" /></p></blockquote><span class="meta"><time datetime="2021-01-13T00:00:00+08:00">January 13, 2021</time> &middot; <a href="/tag/bookmarklet">bookmarklet</a>, <a href="/tag/automation">automation</a>, <a href="/tag/side-project">side-project</a></span></section><section class="disqus"><div id="disqus_thread"></div><script type="text/javascript"> var disqus_shortname = "https-darensin01-github-io"; var disqus_identifier = "/2021/01/13/bto-bookmarklet"; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section></main></body></html>
